# Test config for nahcrof provider
[provider_rate_limits]
openai = 400
provider_burst_percent = 20

[generation]
main_topic = "Creative Fiction"
dataset_mode = "sft"
num_subtopics = 2      # Small test
subtopic_chunk_size = 64
num_prompts_per_subtopic = 4
concurrency = 16       # Lower for controlled test
over_generation_buffer = 0.15
max_exclusion_list_size = 64
min_success_rate = 0.96
prompt_retry_attempts = 5
include_topic_columns = false
enable_checkpointing = true
checkpoint_interval = 10
enable_reasoning_capture = false  # Disable for cleaner test

[models.main]
base_url = "https://ai.nahcrof.com/v2"
model_name = "kimi-k2-thinking"
temperature = 1
structure_temperature = 0.7
top_p = 1.0
top_k = -1
min_p = 0.0
max_output_tokens = 16384
context_size = 262144
rate_limit_per_minute = 400
http_timeout_seconds = 900
use_streaming = true
use_json_mode = false
max_retries = 8

[prompt_templates]
chosen_system_prompt = '''You are a professional creative writer. Write engaging short stories based on prompts.'''

subtopic_system_prompt = '''You are a creative brainstorming assistant.'''

prompt_system_prompt = '''You are an expert at creating story writing prompts.'''

subtopic_generation = '''Generate {{.NumSubtopics}} unique fantasy fiction subtopics for: "{{.MainTopic}}".

{{if .IsRetry}}Avoid these: {{.ExcludeSubtopics}}{{end}}

Return ONLY a JSON array of strings:
["subtopic 1", "subtopic 2"]

Generate {{.NumSubtopics}} subtopics now:'''

prompt_generation = '''Generate {{.NumPrompts}} story prompts for: "{{.SubTopic}}".

Return ONLY a JSON array of strings:
["prompt 1", "prompt 2"]

Generate {{.NumPrompts}} prompts now:'''

chosen_generation = '''Write a compelling short story (1,000-2,000 words) based on this prompt:

{{.Prompt}}

Your story should:
- Have a clear beginning, middle, and end
- Feature vivid descriptions and engaging characters
- Include dialogue where appropriate
- Be polished and complete

Write the story now:'''

rejected_generation = '''Write a simple story for: {{.Prompt}}'''
